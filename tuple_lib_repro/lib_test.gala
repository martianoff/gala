package tuple_lib_repro

import (
    "testing"
    "martianoff/gala/go_interop"
)

// Test that Zip correctly returns a tuple with the first elements from each box
func TestZip(t *testing.T) {
    val intBox = &Box[int]{items: go_interop.SliceOf(10, 20, 30)}
    val strBox = &Box[string]{items: go_interop.SliceOf("hello", "world")}

    val result = Zip(intBox, strBox)

    // Verify the tuple contains the first elements
    if result.V1.Get() != 10 {
        t.Errorf("expected V1 to be 10, got %v", result.V1.Get())
    }
    if result.V2.Get() != "hello" {
        t.Errorf("expected V2 to be 'hello', got %v", result.V2.Get())
    }
}

// Test Zip with different types
func TestZipDifferentTypes(t *testing.T) {
    val floatBox = &Box[float64]{items: go_interop.SliceOf(3.14, 2.71)}
    val boolBox = &Box[bool]{items: go_interop.SliceOf(true, false)}

    val result = Zip(floatBox, boolBox)

    if result.V1.Get() != 3.14 {
        t.Errorf("expected V1 to be 3.14, got %v", result.V1.Get())
    }
    if result.V2.Get() != true {
        t.Errorf("expected V2 to be true, got %v", result.V2.Get())
    }
}
